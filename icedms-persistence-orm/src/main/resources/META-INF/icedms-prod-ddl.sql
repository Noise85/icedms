CREATE TABLE document (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, archive_date DATE, confidential SMALLINT DEFAULT 0 NOT NULL, creation_date DATE NOT NULL, creation_user VARCHAR(255) NOT NULL, last_revision VARCHAR(255) NOT NULL, modification_date DATE, modification_user VARCHAR(255), name VARCHAR(255) NOT NULL, status VARCHAR(255) NOT NULL, document_type_id BIGINT, language_id BIGINT, PRIMARY KEY (id))
CREATE TABLE document_group (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, code VARCHAR(255) NOT NULL UNIQUE, creation_date DATE NOT NULL, creation_user VARCHAR(255) NOT NULL, description VARCHAR(255), modification_date DATE, modification_user VARCHAR(255), PRIMARY KEY (id))
CREATE TABLE document_type (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, code VARCHAR(255) NOT NULL UNIQUE, creation_date DATE NOT NULL, creation_user VARCHAR(255) NOT NULL, description VARCHAR(255), modification_date DATE, modification_user VARCHAR(255), PRIMARY KEY (id))
CREATE TABLE document_version (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, content BLOB(2147483647), creation_date DATE NOT NULL, creation_user VARCHAR(255) NOT NULL, lock_time DATE, max_lock_time BIGINT, modification_date DATE, modification_user VARCHAR(255), revision_number VARCHAR(255), document_id BIGINT NOT NULL, lock_user_id BIGINT, mimetype_id BIGINT, PRIMARY KEY (id))
CREATE TABLE document_index (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, text_value VARCHAR(255) NOT NULL, document_id BIGINT NOT NULL, index_type_id BIGINT NOT NULL, PRIMARY KEY (id))
CREATE TABLE index_type (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, code VARCHAR(255) NOT NULL UNIQUE, description VARCHAR(255), validation_rule VARCHAR(255) NOT NULL, PRIMARY KEY (id))
CREATE TABLE index_type_document_type (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, mandatory SMALLINT DEFAULT 0 NOT NULL, multivalued SMALLINT DEFAULT 0 NOT NULL, document_type_id BIGINT NOT NULL, index_type_id BIGINT NOT NULL, PRIMARY KEY (id))
CREATE TABLE document_language (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, code VARCHAR(255) NOT NULL, description VARCHAR(255), iso_code VARCHAR(255) NOT NULL, PRIMARY KEY (id))
CREATE TABLE mimetype (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, code VARCHAR(255) NOT NULL, description VARCHAR(255), iso_code VARCHAR(255) NOT NULL, PRIMARY KEY (id))
CREATE TABLE sys_user (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, creation_date DATE NOT NULL, creation_user VARCHAR(255) NOT NULL, email VARCHAR(255), first_name VARCHAR(255), last_name VARCHAR(255), modification_date DATE, modification_user VARCHAR(255), password VARCHAR(255), pseudo VARCHAR(255), PRIMARY KEY (id))
CREATE TABLE document_type_document_group (document_type_id BIGINT NOT NULL, document_group_id BIGINT NOT NULL, PRIMARY KEY (document_type_id, document_group_id))
ALTER TABLE document ADD CONSTRAINT dcmentdcmenttypeid FOREIGN KEY (document_type_id) REFERENCES document_type (id)
ALTER TABLE document ADD CONSTRAINT documentlanguageid FOREIGN KEY (language_id) REFERENCES document_language (id)
ALTER TABLE document_version ADD CONSTRAINT dcmntversionlcksrd FOREIGN KEY (lock_user_id) REFERENCES sys_user (id)
ALTER TABLE document_version ADD CONSTRAINT dcmntversionmmtypd FOREIGN KEY (mimetype_id) REFERENCES mimetype (id)
ALTER TABLE document_version ADD CONSTRAINT dcmntversiondcmntd FOREIGN KEY (document_id) REFERENCES document (id)
ALTER TABLE document_index ADD CONSTRAINT dcmntndexndxtypeid FOREIGN KEY (index_type_id) REFERENCES index_type (id)
ALTER TABLE document_index ADD CONSTRAINT dcmntindexdcmentid FOREIGN KEY (document_id) REFERENCES document (id)
ALTER TABLE index_type_document_type ADD CONSTRAINT ndxtypdcmntndxtypd FOREIGN KEY (index_type_id) REFERENCES index_type (id)
ALTER TABLE index_type_document_type ADD CONSTRAINT ndxtypdcmdcmnttypd FOREIGN KEY (document_type_id) REFERENCES document_type (id)
ALTER TABLE document_type_document_group ADD CONSTRAINT dcmnttypddcmnttypd FOREIGN KEY (document_type_id) REFERENCES document_group (id)
ALTER TABLE document_type_document_group ADD CONSTRAINT dcmnttypddcmntgrpd FOREIGN KEY (document_group_id) REFERENCES document_type (id)
